
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>λ³΄μ• μ•”νΈν™” λ„κµ¬ (AES-256)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 40px auto; line-height: 1.6; }
    textarea, input { width: 100%; margin: 5px 0 15px 0; padding: 10px; font-size: 14px; }
    button { padding: 10px 20px; font-size: 14px; }
    h2 { margin-top: 40px; }
  </style>
</head>
<body>
  <h1>π” μμ • κ°€λ¥ν• μ¤ν”„λΌμΈ μ•”νΈν™”κΈ° (AES-256)</h1>

  <h2>1. μ•”νΈν™”</h2>
  <label>μ…λ ¥ν•  λ‚΄μ©</label><br>
  <textarea id="plaintext" rows="4"></textarea>

  <label>λΉ„λ°€λ²νΈ</label><br>
  <input type="password" id="encryptPassword">

  <button onclick="encrypt()">μ•”νΈν™”</button>
  <label>μ•”νΈν™” κ²°κ³Ό</label>
  <textarea id="encryptedOutput" rows="4" readonly></textarea>

  <h2>2. λ³µνΈν™” λ° μμ •</h2>
  <label>μ•”νΈν™”λ λ¬Έμμ—΄</label><br>
  <textarea id="ciphertext" rows="4"></textarea>

  <label>λΉ„λ°€λ²νΈ</label><br>
  <input type="password" id="decryptPassword">

  <button onclick="decrypt()">λ³µνΈν™”</button>
  <label>λ³µνΈν™”λ λ‚΄μ© (μμ • κ°€λ¥)</label>
  <textarea id="decryptedOutput" rows="24"></textarea>

  <button onclick="reEncrypt()">μμ • ν›„ λ‹¤μ‹ μ•”νΈν™”</button>
  <label>μ¬μ•”νΈν™”λ κ²°κ³Ό</label>
  <textarea id="reEncryptedOutput" rows="4" readonly></textarea>

<script>
function encrypt() {
  var message = document.getElementById("plaintext").value;
  var password = document.getElementById("encryptPassword").value;
  if (!message || !password) {
    alert("μ…λ ¥κ°’κ³Ό λΉ„λ°€λ²νΈλ¥Ό λ¨λ‘ μ…λ ¥ν•μ„Έμ”.");
    return;
  }
  var ciphertext = CryptoJS.AES.encrypt(message, password).toString();
  document.getElementById("encryptedOutput").value = ciphertext;
}

function decrypt() {
  var ciphertext = document.getElementById("ciphertext").value;
  var password = document.getElementById("decryptPassword").value;
  if (!ciphertext || !password) {
    alert("μ•”νΈλ¬Έκ³Ό λΉ„λ°€λ²νΈλ¥Ό λ¨λ‘ μ…λ ¥ν•μ„Έμ”.");
    return;
  }
  try {
    var bytes = CryptoJS.AES.decrypt(ciphertext, password);
    var originalText = bytes.toString(CryptoJS.enc.Utf8);
    if (!originalText) throw "λ³µνΈν™” μ‹¤ν¨";
    document.getElementById("decryptedOutput").value = originalText;
  } catch (e) {
    alert("λ³µνΈν™”μ— μ‹¤ν¨ν–μµλ‹λ‹¤. λΉ„λ°€λ²νΈ λλ” μ•”νΈλ¬Έμ„ ν™•μΈν•μ„Έμ”.");
    document.getElementById("decryptedOutput").value = "";
  }
}

function reEncrypt() {
  var newText = document.getElementById("decryptedOutput").value;
  var password = document.getElementById("decryptPassword").value;
  if (!newText || !password) {
    alert("μμ •λ ν…μ¤νΈμ™€ λΉ„λ°€λ²νΈλ¥Ό λ¨λ‘ μ…λ ¥ν•μ„Έμ”.");
    return;
  }
  var newCipher = CryptoJS.AES.encrypt(newText, password).toString();
  document.getElementById("reEncryptedOutput").value = newCipher;
}
</script>

</body>
</html>
